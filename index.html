<!DOCTYPE html>
<html>
<head>
<title>Glork.io</title>
<meta charset="utf-8">
<meta name="description" content="Replicate and mutate your virus to achieve world domination">
<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0">
<link rel="icon" type="image/x-icon" href="img/favicon.ico?v=eE5Kg5RPWK">
<link rel="stylesheet" type="text/css" href="font/Crushed.css"/>
<!-- <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Crushed"/> -->
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans"/>
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Fredoka+One"/>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-111939838-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-111939838-1');
</script>
<style>
.viral {
	background-color: pink;
	background-image: url("img/virus_background.png");
	background-size: cover;
}

.startMenu {
    position: relative;
    margin: auto;
    width: 1150px;
    padding: 10px;
    padding-bottom: 20px;
    margin-top: 100px;
    margin-bottom: 100px;
    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    background-color: #DDE6EB;
    box-sizing: border-box;
    overflow: hidden;
}
.buttonn {
  display: inline-block;
  border-radius: 4px;
  background-color: #f4511e;
  border: none;
  color: #FFFFFF;
  text-align: center;
  font-size: 28px;
  padding: 20px;
  width: 200px;
  transition: all 0.5s;
  cursor: pointer;
  margin: 5px;
}

.buttonn span {
  cursor: pointer;
  display: inline-block;
  position: relative;
  transition: 0.5s;
}

.buttonn span:after {
  content: 'Â»';
  position: absolute;
  opacity: 0;
  top: 0;
  right: -20px;
  transition: 0.5s;
}

.buttonn:hover span {
  padding-right: 25px;
}

.buttonn:hover span:after {
  opacity: 1;
  right: 0;
}

.panel {
display:inline-block;
width: 300px;
padding: 18px;
background-color: #595959;
-webkit-border-radius: 4px;
-moz-border-radius: 4px;
border-radius: 4px;
}

.button {
background-color: #4CAF50;
border: none;
color: white;
padding: 10px 10px;
text-align: center;
text-decoration: none;
display: inline-block;
font-size: 16px;
}

#server {
  background-color: white;
  color: black;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 32px;
}

.joinbutton {
  background-color: white;
  font-family: "Open Sans";
  font-weight:bolder;
  border: 2px;
  border-radius: 5px;
  width:300px;
  color:#00b3b3;
  padding: 10px 30px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 32px;
  -moz-box-shadow: 0px 7px #f2f2f2;
  -webkit-box-shadow: 0px 7px #f2f2f2;
  box-shadow: 0px 7px #f2f2f2;
}
.joinbutton:hover {
  background-color: #E6E6E6;
}

.playbutton {
  background-color: #00E6E6;
  font-family: "Open Sans";
  border: 2px;
  border-radius: 5px;
  width:300px;
  color: white;
  padding: 10px 30px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 32px;
  -moz-box-shadow: 0px 7px #00b3b3;
  -webkit-box-shadow: 0px 7px #00b3b3;
  box-shadow: 0px 7px #00b3b3;
}
.playbutton:hover {
  background-color: #00CCCC;
}

.linkbutton {
  text-decoration: none;
  background-color: #00E6E6;
  font-family: "Open Sans";
  border: 2px;
  border-radius: 5px;
  width:240px;
  color: white;
  padding: 10px 30px;
  text-align: center;
  display: inline-block;
  font-size: 32px;
  -moz-box-shadow: 0px 7px #00b3b3;
  -webkit-box-shadow: 0px 7px #00b3b3;
  box-shadow: 0px 7px #00b3b3;
}
.linkbutton:hover {
  background-color: #00CCCC;
}


.filler {
  display:inline-block;
  vertical-align: middle;
  width:300px;
  background-color:white;
  height: 5px;
  border: 0px solid black;
  border-radius:2.5px;
  margin-top:15px;
  margin-bottom:10px;
}

.nam {
	width: 100%;
	white-space: nowrap;
	text-align: center;
   	position: absolute;
	top: 45%;
	transform: translateY(-50%);
	-ms-transform: translateY(-50%);
	-moz-transform: translateY(-50%);
	-webkit-transform: translateY(-50%);
	-o-transform: translateY(-50%);
}

.menuCard {
	vertical-align: top;
	text-align: left;
	white-space: normal;
	word-wrap: break-word;
	margin: 5px;
	display: inline-block;
	width: 300px;
	padding: 18px;
	background-color: #595959;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
	overflow: hidden;
}
#gameName {
	font-family: "Fredoka One";
	text-align:center;
	font-size: 170px;
	text-shadow:
		0 1px 0 pink,
		0 2px 0 pink,
		0 3px 0 pink,
		0 4px 0 pink,
		0 5px 0 pink,
		0 6px 0 pink,
		0 7px 0 pink,
		0 8px 0 pink,
		0 9px 0 pink;
	color: #FF667D;
}
#signDiv-username {
    text-align: center;
    font-size: 23px;
    margin-bottom: 16px;
    padding: 6px;
    border: none;
    outline: none;
    box-sizing: border-box;
    color: #4A4A4A;
    background-color: #e5e3e3;
    width: 100%;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
}
#welcome {
    font-family: 'Hammersmith One';
	font-size: 36px;
}
#serverSelect {
   font-size:22px;
   color:white;
   background-color:#00E6E6;
   padding: 10px 30px;
   width:300px;
   text-align:center;
   border-radius: 5px;
}
#cookies_check_box {
  display: none;
  position:absolute;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
#cookies_check {
  background: rgba(0, 0, 0, 0.8);
  border-radius: 14px 0px 0px 14px;
  padding-left: 10px;
  padding-right: 10px;
  padding-top: 10px;
  padding-bottom: 20px;
  border:solid 2px #47310f;
  height:40px;
  font-size: 14px;
  width:300px;
  color: #FFFFFF;
  font-family: "Baloo Paaji";
}

* {
  user-select:none;
}
.blink_me {
  animation: blinker 2s linear infinite;
}

@keyframes blinker {  
  50% { opacity: 0; }
}
.blink_me2 {
  animation: blinker2 2s linear infinite;
}

@keyframes blinker2 {  
  55% { opacity: 0; }
}
.blink_me3 {
  animation: blinker3 2s linear infinite;
}

@keyframes blinker3 {  
  60% { opacity: 0; }
}
.link {
  border-radius:5px;
}
.leaderboard { font-family: "Trebuchet MS", Arial, Helvetica, sans-serif; border-collapse:collapse; width:100%; font-size:10px; color:white; }
.leaderboard tr:nth-child(even){ background-color: #8C8C8C; }
.leaderboard tr:hover{ background-color: #999999; }
.leaderboard td { border: 1px solid #ddd; padding:8px; text-align:right; background-color:#8C8C8C; color:white; }
.leaderboard th { font-size:16px; border:1px solid #ddd; padding:8px; padding-top:12px; padding-bottom:12px; text-align:left; background-color:#66FFFF; color:white; }
.leaderboard caption { font-size:20px; padding-top:12px; padding-bottom:12px; text-align:center; background-color:#595959; color:white; }

#linksContainer {
	border-radius: 4px;
	position: absolute;
	bottom: 0px;
	right: 0px;
	background-color: #fff;
	text-align: right;
	font-size: 20px;
	padding: 8px;
	-webkit-border-radius: 4px 0 0 0;
	-moz-border-radius: 4px 0 0 0;
	border-radius: 4px 0 0 0;
}
.alert {
    position:absolute;
    top:10px;
    color: red;
    -webkit-animation-name: example; /* Chrome, Safari, Opera */
    -webkit-animation-duration: 2s; /* Chrome, Safari, Opera */
    animation-name: example;
    animation-duration: 2s;
    animation-direction: alternate;
    animation-iteration-count: 300;
}
/* Chrome, Safari, Opera */
@-webkit-keyframes example {
    from {color: red;}
    to {color: yellow;}
}
/* Standard syntax */
@keyframes example {
    from {color: red;}
    to {color: yellow;}
}
#deathdiv {
   background-image: url("img/virus_background.png");
   background-repeat:no-repeat;
   background-size:cover;
}
#minimap {
   opacity:0.5;
}
#vvv {
   font-size:30px;
   background-color: rgba(255, 255, 255, 0.3);
}
#vvv td { vertical-align:top; }
#topInfoHolder {
	position: absolute;
	right: 20px;
	top: 20px;
}
#rightInfoHolder {
	position: absolute;
	left: 10px;
	top: 15px;
}
#centerInfoHolder {
	position: absolute;
	left:10px;
	text-align:center;
	bottom: 20px;
}

.twitter {
  float: left;
  width: 142px;
  margin: 0px 4px;
  color: white;
  font-size: 24px;
  height: 32px;
  line-height: 32px;
  text-decoration: none;
  border-radius: 5px;
  background-size: 24px;
  background-position: left;
  background-repeat: no-repeat;
  background-image: url("img/twitter.png");
  background-color: #1b95e0;
}
.twitter:hover { background-color: #0983ce; }
.youtube {
  background-image: url("img/youtube.png");
  background-color: #e52d27;
}
.youtube:hover { background-color: #d31b15; }
.reddit {
  background-image: url("img/reddit.png");
  background-color: #ff6666;
}
.reddit:hover { background-color: #dd4444; }
.credits {
  text-decoration: none;
  text-align: center;
  color: #4a4a4a;
  background-color: #e5e3e3;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2), 0 4px 0 #c3c1c1;
}
.credits:hover { background-color: #c3c1c1; }

</style>
</head>

<body style="overflow:hidden;">
<script src="js.cookie.js"></script>

<div id="signDiv">
  <div class="viral" style="width:100%;height:100%;position:fixed;z-index:-1"></div>
  <div class="nam" style="text-align:center;display:inline;visibility:visible;position:fixed;z-index:1;left:50%;top:50%;transform:translate(-50%, -50%);">
    <div id="gameName">GLORK.IO</div>
    <div class='menuCard' style="display:inline-block;vertical-align:top;left:35%">
      <table id="dayleader" class="leaderboard"><caption><b>Today's Leaderboard</b></caption><tr><th>Rank</th><th>Date</th><th>Player</th><th>Score</th></tr><tr><td style="text-align: center" colspan="4">Leaderboard Unavailable</td></tr></table>
    </div>
    <div class="menuCard" style="display:inline-block;vertical-align:top;text-align:center">
      <p id = 'welcome' style = 'color:white;display:none; font-size:24px;'><b>Welcome back!</b><br><b>Your high score is </b><strong id = 'cookiescore'></strong><br></p>
      <input style="-webkit-user-select: text;" id='signDiv-username' type="text" maxlength="15" placeholder="Name for leaderboard" spellcheck="false" onkeydown="" autofocus="">
      <div id='server'>Loading Servers..</div>
<!--  <select id='serverSelect'></select> -->
      <div class="filler"></div>
      <button class='joinbutton' id='signDiv-signIn'><b>PLAY</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b class="blink_me">&#x25b6;</b><b class="blink_me2">&#x25b6;</b><b class="blink_me3">&#x25b6;</b></button>
      <div style="margin-top:17px; margin-bottom:10px"></div>
      <button class='playbutton' onclick="tutor()"><b>LEARN GAME</b></button>
      <div class="filler"></div>
      <a href="https://goo.gl/QhsFFz" target="_blank" class="linkbutton" style="font-size:28px;width:280px;padding:2px 10px"><b>INSTRUCTIONS</b></a>
      <div style="margin-top:17px; margin-bottom:10px"></div>
<!--      <div class="filler"></div> -->
      <a class="linkbutton" target="_blank" title="Glork.io Credits" href="http://goo.gl/7qakdE" style="font-size:24px;width:280px;padding:2px 10px"><b>Credits</b></a>
      <div class="filler"></div>
      <span>
	<a class="twitter" target="_blank" title="Invite your friends" href="https://twitter.com/intent/tweet?url=http://glork.io&via=GlorkIOGame&text=Play+http%3a%2f%2fglork.io+with+me!+%23FightFlu+%23PlayFlu">Invite</a>
	<a class="twitter" target="_blank" title="Follow @GlorkIOGame" href="https://twitter.com/intent/follow?original_referer=http://glork.io&screen_name=GlorkIOGame">Follow</a>
<!-- 
	<a class="youtube" target="_blank" href="http://www.youtube.com/channel/UCjcnsN3GTbhPoQt4rH3aW4A"></a>
        <a class="reddit"  target="_blank" href="http://reddit.com/u/glorkio"></a>
 -->
      </span>
    </div>
    <div class='menuCard' style = "display: inline-block; vertical-align: top;">
      <div id="allleader">
	<table class="leaderboard"><caption><b>All-Time Leaderboard</b></caption><tr><th>Rank</th><th>Date</th><th>Player</th><th>Score</th></tr><tr><td style="text-align: center" colspan="4">Leaderboard Unavailable</td></tr></table>
      </div>
    </div>
  </div>
</div>

<audio id="audiotag1" src="audio/rad-powerup.mp3" preload="auto"></audio>
<audio id="audiotag2" src="audio/rad-powerdown.mp3" preload="auto"></audio>
<audio id="audiotag3" src="audio/rad-damage.mp3" preload="auto"></audio>
<audio id="audiotag4" src="audio/cell-death.mp3" preload="auto"></audio>
<audio id="audiotag6" src="audio/cell-slurp.mp3" preload="auto"></audio>
<audio id="audiotag5" src="audio/medicine.mp3" preload="auto"></audio>
<audio id="audiotag7" src="audio/cancer.mp3" preload="auto"></audio>
<audio id="audiotag8" src="audio/host-death.mp3" preload="auto"></audio>
<audio id="audiotag9" src="audio/revival.mp3" preload="auto"></audio>
<audio id="audiotag10" src="audio/cancer-spawn.mp3" preload="auto"></audio>
<audio id="audiotag11" src="audio/player-click.mp3" preload="auto"></audio>
<audio id="audiotag12" src="audio/player-newtip.mp3" preload="auto"></audio>
<script>
// document.getElementById("got_it").onclick = function(){ document.getElementById("cookies_check_box").display = "none"; }

// note: impossible to suppress network errors in console because they are handled by browser
var HttpClient = function() {
    this.get = function(aUrl, aCallback) {
        var anHttpRequest = new XMLHttpRequest();
        anHttpRequest.onreadystatechange = function() { 
            if (anHttpRequest.readyState === XMLHttpRequest.DONE) {
               if (anHttpRequest.status === 200) {
                  aCallback(anHttpRequest.responseText);
               }
            }
        }
        anHttpRequest.open( "GET", aUrl, true );            
        anHttpRequest.send();
    }
}
var client = new HttpClient();

// LEADERBOARDS
const leaderurl = 'https://salty-scrubland-48776.herokuapp.com/api/leader/virus';
if (document.domain !== "localhost") {
  client.get(leaderurl + '?top=10', function(response) {
     document.getElementById("allleader").innerHTML = response;
  });
  client.get(leaderurl + '?top=10&today', function(response) {
     document.getElementById("dayleader").innerHTML = response;
  });
}


// SERVER CHOICES
const servecount = 1;
const serverurl = ["http://glork-usa1.herokuapp.com","http://glork-eu1.herokuapp.com","http://glork-usa2.herokuapp.com","http://glork-eu2.herokuapp.com","http://glork-usa3.herokuapp.com"];
const servername = ["US1","EU1","US2","EU2","US3"];
var serverchoices = "";

var loadServerOption = function(name,url){
    client.get(url+"/api/players",function(response){
        var thischoice = "<option" + ((serverchoices ==="")?" selected":"") + " value='" + url + "'>" + name + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [" + response + " players]</option>";
	serverchoices += thischoice;
	document.getElementById("server").innerHTML = "<select id='serverSelect'>" + serverchoices + "</select>";
	// console.log(thischoice);
    });
}

if (document.domain === "localhost") {
   loadServerOption("LOC","http://localhost:5000");
} else {
   if (document.domain !== "glork.io") {
     loadServerOption("DEV","http://virusio-test1.herokuapp.com");
   }
   for(var i=0; i<servecount; i++){
      loadServerOption(servername[i],serverurl[i]);
   }
}

</script>

<div id="deathDiv" style="display:none;">
  <div class="nam" style="text-align:center; display:inline; visibility:visible; position:fixed; z-index:1; left:50%; top:50%; transform:translate(-50%, -50%); width:500px;">
    <div class="panel" style="display:inline-block;vertical-align:top">
      <h1 style="color:white;">ERADICATED</h1><br>
      <div id='scored' style="color:white;font-size:24px;"></div><br>
      <div id='best' style="display:none;color:white;font-size:24px;">New Personal Best!</div><br>
      <div class="filler"></div><br>
      <button class='joinbutton' onclick="play()"><b>REPLAY</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b class = "blink_me">&#x25b6;</b><b class = "blink_me2">&#x25b6;</b><b class = "blink_me3">&#x25b6;</b></button>
      <div style="margin-top:17px; margin-bottom:10px"></div>
      <button class='playbutton' onclick="tutor()"><b>LEARN GAME</b></button><br>
      <div class="filler"></div><br>
      <a href="https://goo.gl/forms/lCU8BJn0lCgliuTC3" target="_blank" class="linkbutton" style="font-size:28px;width:280px;padding:2px 10px"><b>FEEDBACK</b></a><br>
      <div class="filler"></div><br>
      <span>
	<a id="twitterBrag" class="twitter" target="_blank" title="Share your score" href="https://twitter.com/intent/tweet?url=http://glork.io&via=GlorkIOGame&text=Play+http%3a%2f%2fglork.io+with+me!+%23FightFlu+%23PlayFlu">Share</a>
	<a class="twitter" target="_blank" title="Invite your friends" href="https://twitter.com/intent/tweet?url=http://glork.io&via=GlorkIOGame&text=Play+http%3a%2f%2fglork.io+with+me!+%23FightFlu+%23PlayFlu">Invite</a>
	<!--
	    <a class="twitter" target="_blank" title="Follow @GlorkIOGame" href="https://twitter.com/intent/follow?original_referer=http://glork.io&screen_name=GlorkIOGame">Follow</a>
	    -->
      </span>
    </div>
  </div>
</div>
<div id="gameDiv" style="display:none;background-color:#e6e6e6;">
  <canvas id="ctx" width="500" height="500" style="border:0px solid #000000;"></canvas>
  <div id="centerInfoHolder">
    <div id="vvv"></div>
  </div>
  <div id="topInfoHolder">
  </div>
  <canvas id="minimap" width="150" height="150" style='position:absolute; background-color:white; right:20px; bottom:20px; width="100"; height="100";border:2px solid #000000;'></canvas>
</div>

<script src="socket.io.js"></script>
<script src="player.js"></script>
</body>
</html>
